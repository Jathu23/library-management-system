<div class="container mt-4">
  <!-- Search bar -->
  <div class="search-bar mb-4">
    <input
      type="text"
      class="form-control"
      placeholder="Search for a username"
      [(ngModel)]="searchQuery"
      (input)="onSearch()"
    />
    <!-- Suggestions -->
    <ul class="list-group mt-1" *ngIf="suggestions.length > 0">
      <li
        class="list-group-item suggestion-item"
        *ngFor="let suggestion of suggestions"
        (click)="selectUsername(suggestion)"
      >
        {{ suggestion }}
      </li>
    </ul>
  </div>

  <!-- User Information Display -->
  <div *ngIf="userInfo" class="card user-info-card mb-4">
    <img
      [src]="'assets/' + userInfo.profileImage"
      class="card-img-top profile-img"
      alt="User Profile"
    />
    <div class="card-body">
      <h5 class="card-title">{{ userInfo.fullName }}</h5>
      <p class="card-text">
        <strong>Email:</strong> {{ userInfo.email }} <br />
        <strong>Phone Number:</strong> {{ userInfo.phoneNumber }} <br />
        <strong>Address:</strong> {{ userInfo.address }} <br />
        <strong>Registration Date:</strong>
        {{ userInfo.registrationDate | date: 'medium' }} <br />
        <strong>Status:</strong>
        {{ userInfo.isActive ? 'Active' : 'Inactive' }}
      </p>
    </div>
  </div>

  <!-- Pending Books Display -->
  <div *ngIf="pendingBooks.length > 0" class="card pending-books-card mb-4">
    <div class="card-body">
      <h5 class="card-title">Pending Books</h5>
      <ul class="list-group">
        <li class="list-group-item" *ngFor="let book of pendingBooks">
          <strong>{{ book.title }}</strong> - Due on {{ book.dueDate | date }}
        </li>
      </ul>
      
    </div>
  </div>
  <button class="btn btn-primary mt-3" (click)="onRentClick()">Rent</button>
  <!-- Loader -->
  <div *ngIf="isLoading" class="text-center mt-4">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>






<table class="table table-bordered">
  <thead>
    <tr>
      <th>Lent ID</th>
      <th>Book Title</th>
      <th>BookCopyId</th>
      <th>Author</th>
      <th>Lent Date</th>
      <th>Due Date</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngIf="isLoading">
      <td colspan="8">Loading...</td>
    </tr>
    <tr *ngIf="errorMessage">
      <td colspan="8">{{ errorMessage }}</td>
    </tr>
    <ng-container *ngFor="let record of lentRecords">
      <tr>
        <td>{{ record.id }}</td>
        <td>{{ record.bookTitle }}</td>
        <td>{{ record.bookCopyId }}</td>
        <td>{{ record.bookAuthor }}</td>
        <td>{{ record.lentDate | date: 'yyyy-MM-dd' }}</td>
        <td>{{ record.dueDate | date: 'yyyy-MM-dd' }}</td>
        <td>{{ record.status }}</td>
        <td>
          <button (click)="openModal(record)">Details</button>
        </td>
      </tr>
<!-- Modal for Expanded Details -->
<div *ngIf="selectedRecord" class="modal-backdrop">
  <div class="modal-content">
    <h3>Detailed Information</h3>
    <button class="close-btn" (click)="closeModal()">Close</button>
    <table class="additional-info-table">
      <tr>
        <td><strong>User ID:</strong></td>
        <td>{{ selectedRecord.userId }}</td>
      </tr>
      <tr>
        <td><strong>User Name:</strong></td>
        <td>{{ selectedRecord.userName }}</td>
      </tr>
      <tr>
        <td><strong>User Email:</strong></td>
        <td>{{ selectedRecord.userEmail }}</td>
      </tr>
      <tr>
        <td><strong>Admin ID:</strong></td>
        <td>{{ selectedRecord.adminId }}</td>
      </tr>
      <tr>
        <td><strong>Admin Name:</strong></td>
        <td>{{ selectedRecord.adminName }}</td>
      </tr>
      <tr>
        <td><strong>Book Condition:</strong></td>
        <td>{{ selectedRecord.bookCondition }}</td>
      </tr>
      <tr>
        <td><strong>Book ISBN:</strong></td>
        <td>{{ selectedRecord.bookISBN }}</td>
      </tr>
    </table>
  </div>
</div>
